(this.webpackJsonpclipit=this.webpackJsonpclipit||[]).push([[0],{161:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),o=n(40),i=n.n(o),u=n(4);var s=n(15),j=n(5),b=n(42),d=n(6),f=n.n(d),l=n(25),O=n(3),p=Object(O.pipe)(Object(O.map)((function(e){return e*e})),O.mean,Math.sqrt),v=function(e){return function(t){return Object(O.pipe)(Object(O.chunk)(Math.ceil(t.length/e)),Object(O.map)(p))(t)}},m=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(new Error("Couldn't read file."))}}))},h=function(){var e=Object(l.a)(f.a.mark((function e(t){var n,r,c,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=window.webkitAudioContext?new window.webkitAudioContext:new AudioContext,e.next=4,m(t);case 4:return c=e.sent,e.next=7,r.decodeAudioData(c);case 7:for(a=e.sent,o=0;o<a.numberOfChannels;o++)n.push(Array.from(a.getChannelData(o)));return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=O.pipe(O.unzip,O.map(O.min),O.map(O.toNumber)),w=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:return r=e.sent,c=r.map(v(n)),e.abrupt("return",1===c.length?c:[].concat(Object(b.a)(c),[x(c)]));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=1200,E=0,C=0,y=g-C-0,k=120-E-0,L=Object(j.e)().domain([0,239]).range([0,y]),A=Object(j.e)().domain([0,10]).range([k,0]),N=Object(j.e)().domain([0,y]).range([0,1]),S=Object(j.a)().x((function(e,t){return L(t)})).y0(k).y1((function(e){return A(e)})).curve(j.c);function D(e){var t=e.file,n=e.currentTime,a=e.duration,o=e.onSelect,i=Object(c.useState)([]),s=Object(u.a)(i,2),b=s[0],d=s[1],f=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=Object(j.d)(b.flat(2));A.domain(e),Object(j.f)(f.current).selectAll("path").data(b).join("path").transition().attr("d",S)}),[b]),Object(c.useEffect)((function(){w(t,240).then(d)}),[t]);var l=Object(c.useRef)(null),O=Object(j.e)().domain([0,a]).range([1,y-1]);Object(c.useEffect)((function(){Object(j.f)(l.current).datum(n).attr("x1",O).attr("x2",O).attr("y1",0).attr("y2",k)}),[n,a,O]);var p=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=Object(j.b)().extent([[0,0],[y,k]]);e.on("start brush end",(function(e){o&&(Array.isArray(e.selection)?o(e.selection.map(N)):o(null))})),Object(j.f)(p.current).call(e)}),[o]),Object(r.jsx)("svg",{width:g,height:120,viewBox:"0 0 ".concat(g," ").concat(120),className:"curve",children:Object(r.jsxs)("g",{transform:"translate(".concat(C,", ").concat(E,")"),children:[Object(r.jsx)("g",{ref:f,className:"curve__paths"}),Object(r.jsx)("line",{ref:l,className:"curve__playhead"}),Object(r.jsx)("g",{ref:p})]})})}var R=n(18),_=n.n(R);function q(e){var t=e.status,n=e.onContent,c=e.offContent,a=e.onChange;return Object(r.jsx)("button",{onClick:function(){a&&a(!t)},className:_()("btn--toggle",t?"btn--on":"btn--off"),children:t?n:c})}function P(e){var t=e.file,n=Object(c.useState)(!1),a=Object(u.a)(n,2),o=a[0],i=a[1],j=Object(c.useState)(0),b=Object(u.a)(j,2),d=b[0],f=b[1],l=Object(c.useState)(0),O=Object(u.a)(l,2),p=O[0],v=O[1],m=Object(c.useState)(0),h=Object(u.a)(m,2),x=h[0],w=h[1],g=Object(c.useState)(p),E=Object(u.a)(g,2),C=E[0],y=E[1],k=Object(c.useState)(!1),L=Object(u.a)(k,2),A=L[0],N=L[1],S=function(e){var t=R.current;f(t.duration),v(0),t.currentTime=p},R=Object(c.useRef)(null);Object(c.useEffect)((function(){R.current.onloadedmetadata=S,R.current.onplay=function(){return i(!0)},R.current.onpause=function(){return i(!1)}}));var _=Object(c.useCallback)((function(){var e=R.current;o?e.pause():e.play()}),[o]);Object(c.useEffect)((function(){var e=R.current,t=0;return function n(){y(e.currentTime),t=requestAnimationFrame(n)}(),function(){t&&cancelAnimationFrame(t)}}),[]),Object(c.useEffect)((function(){var e=R.current;C>=x&&(e.currentTime=p,A||e.pause())}),[C,x,A,p]),Object(c.useEffect)((function(){var e=R.current;e.src=URL.createObjectURL(t);e.addEventListener("load",(function t(){URL.revokeObjectURL(e.src),e.removeEventListener("load",t)}))}),[t]),Object(c.useEffect)((function(){R.current.currentTime=p}),[p]);return Object(r.jsxs)("div",{className:"clipper",children:[Object(r.jsxs)("div",{className:"clipper__view",children:[Object(r.jsx)(D,{file:t,currentTime:C,duration:d,onSelect:function(e){e?(v(e[0]*d),w(e[1]*d)):(v(0),w(d))}}),Object(r.jsx)("audio",{ref:R,controls:!0})]}),Object(r.jsxs)("div",{className:"clipper__controls",children:[Object(r.jsx)(q,{status:o,onContent:Object(r.jsx)(s.b,{}),offContent:Object(r.jsx)(s.b,{}),onChange:_})," ",Object(r.jsx)(q,{status:A,onContent:Object(r.jsx)(s.a,{}),offContent:Object(r.jsx)(s.a,{}),onChange:function(e){return N(e)}})]})]})}var T=n(7),M=n(19),U={accept:"audio/mpeg",multiple:!1};function B(e){var t=e.children,n=e.onDrop,c=e.isHidden,a=Object(M.a)(Object(T.a)(Object(T.a)({},U),{},{onDrop:n})),o=a.getRootProps,i=a.getInputProps,u=a.isDragActive,s=a.isDragReject;return Object(r.jsxs)("div",Object(T.a)(Object(T.a)({className:_()("drop-area",u&&"drop-area--active",s&&"drop-area--rejected",c&&"drop-area--hidden")},o()),{},{children:[Object(r.jsx)("input",Object(T.a)({},i())),t]}))}function F(e){var t=e.onDrop,n=Object(M.a)(Object(T.a)(Object(T.a)({},U),{},{noClick:!0,onDrop:t}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:n.open,children:"Selecione um arquivo"}),Object(r.jsx)("input",Object(T.a)({},n.getInputProps()))]})}function I(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=0;function t(e){e.preventDefault()}function n(t){e++,o()}function c(t){e--,o()}function a(t){e=0,o()}function o(){r(e>0)}return window.addEventListener("dragover",t),window.addEventListener("dragenter",n),window.addEventListener("dragleave",c),window.addEventListener("drop",a),function(){window.removeEventListener("dragover",t),window.removeEventListener("dragenter",n),window.removeEventListener("dragleave",c),window.removeEventListener("drop",a)}}),[]),n}(),i=Object(c.useCallback)((function(e){e.length<1||a(e[0])}),[]);return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)("div",{className:"layout",children:Object(r.jsxs)("main",{className:"layout__content",children:[Object(r.jsx)("h1",{children:"Clipit"}),!n&&Object(r.jsxs)("div",{className:"begin text--center",children:[Object(r.jsx)("p",{children:"Para come\xe7ar, selecione um arquivo MP3 no seu computador. Voc\xea tamb\xe9m pode arrastar e soltar o arquivo em qualquer lugar da p\xe1gina."}),Object(r.jsx)(F,{onDrop:i}),Object(r.jsx)("p",{})]}),n&&Object(r.jsx)(P,{file:n})]})}),Object(r.jsx)(B,{isHidden:!o,onDrop:i,children:"\ud83d\udd25 drop it like it's hot \ud83d\udd25"})]})}n(161);i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.78d91041.chunk.js.map