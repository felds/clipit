(this.webpackJsonpclipit=this.webpackJsonpclipit||[]).push([[0],{218:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(79),c=n(239),u=n(0),i=n.n(u),o=n(36),s=n.n(o),l=n(6);var j=n(5),b=n.n(j),f=n(13),d=n(9),O=n(240),p=n(20),h=n(16),v=n(76),m=n(12),x=Object(m.pipe)(Object(m.map)((function(e){return e*e})),Object(m.pipe)(m.mean,Math.sqrt)),w=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(new Error("Couldn't read file."))}}))};function g(e){for(var t=new Int16Array(e.length),n=0,r=e.length;n<r;n++)e[n]<0?t[n]=32768*e[n]:t[n]=32767*e[n];return t}function y(e,t){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(b.a.mark((function e(t,n){var r,a,c,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>2&&void 0!==u[2]?u[2]:128,a=new v.Mp3Encoder(n.numberOfChannels,n.sampleRate,r),e.t0=t.length,e.next=1===e.t0||2===e.t0?5:7;break;case 5:return c=a.encodeBuffer.apply(a,Object(h.a)(t)),e.abrupt("return",new Blob([c],{type:"audio/mp3"}));case 7:throw new Error("Wrong number of channels: ".concat(n.numberOfChannels));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n){var r=e.sampleRate;return function(e){switch(e.numberOfChannels){case 1:return[g(e.getChannelData(0))];case 2:return[g(e.getChannelData(0)),g(e.getChannelData(1))];default:throw new Error("Wrong number of channels: ".concat(e.numberOfChannels))}}(e).map((function(e){return e.subarray(r*t,r*n)}))}function N(e){return _.apply(this,arguments)}function _(){return(_=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r;(new(null!==(r=window.AudioContext)&&void 0!==r?r:window.webkitAudioContext)).decodeAudioData(t,e,(function(){return n(new Error("Couldn't decode audio"))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return n=e.sent,e.next=5,N(n);case 5:return r=e.sent,e.abrupt("return",[r.getChannelData(0),r.numberOfChannels>1?r.getChannelData(1):r.getChannelData(0)]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){for(var n=e.length,r=Math.ceil(n/t),a=new Array(t),c=0;c<t;c++){var u=e.subarray(r*c,r*(c+1));a[c]=x(u)}return a}function D(e){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=n(10),I=(n(218),1200),S=120,M=10,T=0,q=I-T-0,F=S-M-0;function G(e){var t=e.rawChannels,n=e.currentTime,a=e.duration,c=e.trim,i=200,o=Object(u.useState)(null),s=Object(l.a)(o,2),j=s[0],b=s[1];Object(u.useEffect)((function(){b(null),t&&function(e,t){return U.apply(this,arguments)}(t,i).then(b)}),[t,i]);var f=Object(u.useRef)(null);Object(u.useEffect)((function(){var e=null!==j&&void 0!==j?j:function(e){return[Array(e).fill(0),Array(e).fill(0),Array(e).fill(0)]}(i),t=Object(P.e)([0,199],[0,q]),n=null===j?[0,1]:Object(P.d)(e.flat()),r=Object(P.e)(n,[F,0]),a=Object(P.a)().curve(P.b).x((function(e,n){return t(n)})).y0(F).y1(r);Object(P.f)(f.current).selectAll("path").data(e).join("path").transition().duration(500).delay((function(t,n){return r=n,300*(null===j?e.length-r:r);var r})).ease(P.c).attr("d",a)}),[j,i]);var d=Object(u.useRef)(null),O=Object(P.e)([0,a],[1,q-1]);Object(u.useEffect)((function(){Object(P.f)(d.current).datum(n).attr("x1",O).attr("x2",O).attr("y1",0).attr("y2",S)}),[n,a,O]);var p=Object(u.useRef)(null),h=Object(u.useRef)(null);return Object(u.useEffect)((function(){var e=Object(P.e)([0,a],[0,q]),t=Object(l.a)(c,2),n=t[0],r=t[1],u=p.current,i=h.current;Object(P.f)(u).datum(n).attr("width",(function(t){return e(t)})),Object(P.f)(i).datum(r).attr("x",(function(t){return e(t)})).attr("width",(function(t){return e(a-t)}))}),[c,a]),Object(r.jsxs)("svg",{width:I,height:S,viewBox:"0 0 ".concat(I," ").concat(S),className:"graph",children:[Object(r.jsx)("defs",{children:Object(r.jsxs)("mask",{id:"overlayMask",children:[Object(r.jsx)("rect",{width:"300",height:"100%",fill:"white",ref:p}),Object(r.jsx)("rect",{x:"100%",y:"0",height:"100%",fill:"white",ref:h})]})}),Object(r.jsxs)("g",{children:[Object(r.jsx)("g",{transform:"translate(".concat(T,", ").concat(M,")"),ref:f,className:"graph__paths"}),Object(r.jsx)("rect",{x:"0",y:"0",height:S,width:I,className:"graph__grayscale-overlay",mask:"url(#overlayMask)"}),Object(r.jsx)("rect",{x:"0",y:"0",height:S,width:I,className:"graph__opacity-overlay",mask:"url(#overlayMask)"}),Object(r.jsx)("line",{ref:d,className:"graph__playhead"})]})]})}var B=Object(m.pipe)(m.unzip,Object(m.map)(m.min),Object(m.map)(m.toNumber));function U(){return(U=Object(f.a)(b.a.mark((function e(t,n){var r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=A(t[0],n),a=t[0]===t[1]?r:A(t[1],n),c=t[0]===t[1]?r:B([r,a]),e.abrupt("return",[r,a,c]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X,H,J=n(37),W=n.n(J);function z(e){var t=e.status,n=e.onContent,a=e.offContent,c=e.onChange;return Object(r.jsx)("button",{onClick:function(){c&&c(!t)},className:W()("btn--toggle",t?"btn--on":"btn--off"),children:t?n:a})}!function(e){e[e.NONE=0]="NONE",e[e.READING_FILE=1]="READING_FILE",e[e.EXPORTING_MP3=2]="EXPORTING_MP3"}(H||(H={}));var V=(X={},Object(d.a)(X,H.NONE,""),Object(d.a)(X,H.READING_FILE,"Reading file"),Object(d.a)(X,H.EXPORTING_MP3,"Exporting MP3"),X);function K(e){var t=e.file,n=Object(u.useState)(!1),a=Object(l.a)(n,2),c=a[0],i=a[1],o=Object(u.useState)(0),s=Object(l.a)(o,2),j=s[0],d=s[1],h=Object(u.useState)(0),v=Object(l.a)(h,2),m=v[0],x=v[1],w=Object(u.useState)(0),g=Object(l.a)(w,2),E=g[0],N=g[1],_=Object(u.useState)(m),R=Object(l.a)(_,2),A=R[0],L=R[1],P=Object(u.useState)(!1),I=Object(l.a)(P,2),S=I[0],M=I[1],T=Object(u.useState)(H.NONE),q=Object(l.a)(T,2),F=q[0],B=q[1],U=Object(u.useState)(null),X=Object(l.a)(U,2),J=X[0],W=X[1];Object(u.useEffect)((function(){W(null),B(H.READING_FILE),Promise.all([k(t),D(2e3)]).then((function(e){var t=Object(l.a)(e,1)[0];W(t),B(H.NONE)}))}),[t]);var K=function(){var e=Q.current;d(e.duration),N(e.duration),x(0),e.currentTime=0},Q=Object(u.useRef)(null);Object(u.useEffect)((function(){Q.current.onloadedmetadata=K,Q.current.onplay=function(){return i(!0)},Q.current.onpause=function(){return i(!1)}}));var Y=Object(u.useCallback)((function(){var e=Q.current;c?e.pause():e.play()}),[c]);Object(u.useEffect)((function(){var e=Q.current,t=0;return function n(){L(e.currentTime),t=requestAnimationFrame(n)}(),function(){t&&cancelAnimationFrame(t)}}),[]),Object(u.useEffect)((function(){var e=Q.current;A>=E&&(e.currentTime=m,S||e.pause())}),[A,E,S,m]),Object(u.useEffect)((function(){var e=Q.current;e.src=URL.createObjectURL(t),e.onload=function(){URL.revokeObjectURL(e.src)}}),[t]),Object(u.useEffect)((function(){Q.current.currentTime=m}),[m]);function Z(){return(Z=Object(f.a)(b.a.mark((function e(){var n,r,a,c,u,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,r=new AudioContext,e.next=6,r.decodeAudioData(n);case 6:return a=e.sent,c=C(a,m,E),e.next=10,y(c,a);case 10:u=e.sent,(i=document.createElement("a")).setAttribute("download","clip.mp3"),i.setAttribute("hidden","hidden"),i.href=URL.createObjectURL(u),document.body.appendChild(i),i.click();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"clipper",children:[Object(r.jsxs)("div",{className:"clipper__view",children:[Object(r.jsx)(G,{currentTime:A,duration:j,trim:[m,E],rawChannels:J}),Object(r.jsx)(O.a,{value:[m,E],onChange:function(e,t){var n=t,r=Object(l.a)(n,2),a=r[0],c=r[1];x(a),N(c)},min:0,max:j,step:.001}),Object(r.jsx)("audio",{ref:Q})]}),Object(r.jsx)("div",{className:"clipper__controls",children:Object(r.jsxs)("div",{className:"controls",children:[Object(r.jsxs)("div",{className:"controls__start",children:[Object(r.jsx)(z,{status:c,onContent:Object(r.jsx)(p.b,{}),offContent:Object(r.jsx)(p.b,{}),onChange:Y})," ",Object(r.jsx)(z,{status:S,onContent:Object(r.jsx)(p.a,{}),offContent:Object(r.jsx)(p.a,{}),onChange:function(e){return M(e)}})]}),Object(r.jsx)("div",{className:"controls__middle",children:V[F]}),Object(r.jsx)("div",{className:"controls__end",children:Object(r.jsx)("button",{onClick:function(){return Z.apply(this,arguments)},children:Object(r.jsx)(p.c,{})})})]})})]})}var Q=n(15),Y=n(41),Z={accept:"audio/mpeg",multiple:!1};function $(e){var t=e.children,n=e.onDrop,a=e.isHidden,c=Object(Y.a)(Object(Q.a)(Object(Q.a)({},Z),{},{onDrop:n})),u=c.getRootProps,i=c.getInputProps,o=c.isDragActive,s=c.isDragReject;return Object(r.jsxs)("div",Object(Q.a)(Object(Q.a)({className:W()("drop-area",o&&"drop-area--active",s&&"drop-area--rejected",a&&"drop-area--hidden")},u()),{},{children:[Object(r.jsx)("input",Object(Q.a)({},i())),t]}))}function ee(e){var t=e.onDrop,n=Object(Y.a)(Object(Q.a)(Object(Q.a)({},Z),{},{noClick:!0,onDrop:t}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:n.open,children:"Selecione um arquivo"}),Object(r.jsx)("input",Object(Q.a)({},n.getInputProps()))]})}function te(){var e=Object(u.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(u.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(u.useEffect)((function(){var e=0;function t(e){e.preventDefault()}function n(t){e++,u()}function a(t){e--,u()}function c(t){e=0,u()}function u(){r(e>0)}return window.addEventListener("dragover",t),window.addEventListener("dragenter",n),window.addEventListener("dragleave",a),window.addEventListener("drop",c),function(){window.removeEventListener("dragover",t),window.removeEventListener("dragenter",n),window.removeEventListener("dragleave",a),window.removeEventListener("drop",c)}}),[]),n}(),i=Object(u.useCallback)((function(e){e.length<1||a(e[0])}),[]);return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)("div",{className:"layout",children:Object(r.jsxs)("main",{className:"layout__content",children:[Object(r.jsx)("h1",{children:"Clipit"}),!n&&Object(r.jsxs)("div",{className:"begin text--center",children:[Object(r.jsx)("p",{children:"Para come\xe7ar, selecione um arquivo MP3 no seu computador. Voc\xea tamb\xe9m pode arrastar e soltar o arquivo em qualquer lugar da p\xe1gina."}),Object(r.jsx)(ee,{onDrop:i}),Object(r.jsx)("p",{})]}),n&&Object(r.jsx)(K,{file:n})]})}),Object(r.jsx)($,{isHidden:!c,onDrop:i,children:"\ud83d\udd25 drop it like it's hot \ud83d\udd25"})]})}n(223);var ne=Object(a.a)({palette:{primary:{main:"#8134af"}}});s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(c.a,{theme:ne,children:Object(r.jsx)(te,{})})}),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.7b1c34a9.chunk.js.map